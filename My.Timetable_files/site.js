function MobileMenu(n){function u(){r()}function r(){$(window).width()<=n.TriggerWidth?$("."+n.MenuToggleClass).show():$("."+n.MenuToggleClass).hide()}function f(){t==!1&&($("body").addClass(n.MenuOpenClass),t=!0)}function e(){t&&($("body").removeClass(n.MenuOpenClass),t=!1)}function o(){$(n.MenuLauncherLocation).prepend('<div class="'+n.MenuToggleClass+'"><a href="#" title="'+n.OpenMessage+'"><\/a><\/div><\/div>');$("body").prepend('<div class="'+n.MenuContainerClass+'"><\/div>');$("."+n.MenuSelector+"").each(function(){$("."+n.MenuContainerClass).append($(this).html())});$("."+n.MenuToggleClass+" a").click(function(n){n.preventDefault();t?e():f()})}n=extend({MenuLauncherLocation:"body",MenuContainerClass:"mobile-menu",MenuToggleClass:"mobile-menu-toggle",MenuOpenClass:"mobile-menu-open",MenuSelector:"menu",MenuWidth:"100%",CloseMessage:"Hide Navigation",OpenMessage:"Show Navigation",TriggerWidth:"767"},n||{});var t=!1,i=null;o();r();$(window).resize(function(){i&&clearTimeout(i);i=setTimeout(u,500)})}function extend(){for(var t,n=1;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&(arguments[0][t]=arguments[n][t]);return arguments[0]}function DropDownMenu(){$(".menu.horizontal li ul").parent().addClass("dropdown");$(".dropdown").click(function(){var n=$(this).hasClass("dropdownopen");$(".menu.horizontal li ul").hide();$(".menu.horizontal li").removeClass("dropdownopen");n||($(this).children("ul").show(),$(this).addClass("dropdownopen"))});$(".dropdown > a").click(function(n){n.preventDefault()})}var __extends,UoS,Url;(function(n){var t=null;n.modal=function(i,r){n.modal.close();var f,u;if(this.$body=n("body"),this.options=n.extend({},n.modal.defaults,r),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),i.is("a"))if(u=i.attr("href"),/^#/.test(u)){if(this.$elm=n(u),this.$elm.length!==1)return null;this.open()}else this.$elm=n("<div>"),this.$body.append(this.$elm),f=function(n,t){t.elm.remove()},this.showSpinner(),i.trigger(n.modal.AJAX_SEND),n.get(u).done(function(r){if(t){i.trigger(n.modal.AJAX_SUCCESS);t.$elm.empty().append(r).on(n.modal.CLOSE,f);t.hideSpinner();t.open();i.trigger(n.modal.AJAX_COMPLETE)}}).fail(function(){i.trigger(n.modal.AJAX_FAIL);t.hideSpinner();i.trigger(n.modal.AJAX_COMPLETE)});else this.$elm=i,this.open()};n.modal.prototype={constructor:n.modal,open:function(){var t=this;if(this.options.doFade?(this.block(),setTimeout(function(){t.show()},this.options.fadeDuration*this.options.fadeDelay)):(this.block(),this.show()),this.options.escapeClose)n(document).on("keydown.modal",function(t){t.which==27&&n.modal.close()});this.options.clickClose&&this.blocker.click(n.modal.close)},close:function(){this.unblock();this.hide();n(document).off("keydown.modal")},block:function(){var t=this.options.doFade?0:this.options.opacity;this.$elm.trigger(n.modal.BEFORE_BLOCK,[this._ctx()]);this.blocker=n('<div class="jquery-modal blocker"><\/div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:this.options.zIndex,background:this.options.overlay,opacity:t});this.$body.append(this.blocker);this.options.doFade&&this.blocker.animate({opacity:this.options.opacity},this.options.fadeDuration);this.$elm.trigger(n.modal.BLOCK,[this._ctx()])},unblock:function(){this.options.doFade?this.blocker.fadeOut(this.options.fadeDuration,function(){this.remove()}):this.blocker.remove()},show:function(){this.$elm.trigger(n.modal.BEFORE_OPEN,[this._ctx()]);this.options.showClose&&(this.closeButton=n('<a href="#close-modal" rel="modal:close" class="close-modal">'+this.options.closeText+"<\/a>"),this.$elm.append(this.closeButton));this.$elm.addClass(this.options.modalClass+" current");this.center();this.options.doFade?this.$elm.fadeIn(this.options.fadeDuration):this.$elm.show();this.$elm.trigger(n.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(n.modal.BEFORE_CLOSE,[this._ctx()]);this.closeButton&&this.closeButton.remove();this.$elm.removeClass("current");this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration):this.$elm.hide();this.$elm.trigger(n.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||n('<div class="'+this.options.modalClass+'-spinner"><\/div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},center:function(){this.$elm.css({position:"fixed",top:"50%",left:"50%",marginTop:-(this.$elm.outerHeight()/2),marginLeft:-(this.$elm.outerWidth()/2),zIndex:this.options.zIndex+1})},_ctx:function(){return{elm:this.$elm,blocker:this.blocker,options:this.options}}};n.modal.prototype.resize=n.modal.prototype.center;n.modal.close=function(n){if(t){n&&n.preventDefault();t.close();var i=t.$elm;return t=null,i}};n.modal.resize=function(){t&&t.resize()};n.modal.isActive=function(){return t?!0:!1};n.modal.defaults={overlay:"#000",opacity:.75,zIndex:1,escapeClose:!0,clickClose:!0,closeText:"Close",modalClass:"modal",spinnerHtml:null,showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1};n.modal.BEFORE_BLOCK="modal:before-block";n.modal.BLOCK="modal:block";n.modal.BEFORE_OPEN="modal:before-open";n.modal.OPEN="modal:open";n.modal.BEFORE_CLOSE="modal:before-close";n.modal.CLOSE="modal:close";n.modal.AJAX_SEND="modal:ajax:send";n.modal.AJAX_SUCCESS="modal:ajax:success";n.modal.AJAX_FAIL="modal:ajax:fail";n.modal.AJAX_COMPLETE="modal:ajax:complete";n.fn.modal=function(i){return this.length===1&&(t=new n.modal(this,i)),this};n(document).on("click.modal",'a[rel="modal:close"]',n.modal.close);n(document).on("click.modal",'a[rel="modal:open"]',function(t){t.preventDefault();n(this).modal()})})(jQuery),function(n){function t(t){if(typeof t.data=="string"&&(t.data={keys:t.data}),t.data&&t.data.keys&&typeof t.data.keys=="string"){var r=t.handler,i=t.data.keys.toLowerCase().split(" "),u=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){var s,c;if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||n.inArray(t.target.type,u)>-1)){var e=n.hotkeys.specialKeys[t.keyCode],h=t.type==="keypress"&&String.fromCharCode(t.which).toLowerCase(),f="",o={};for(t.altKey&&e!=="alt"&&(f+="alt+"),t.ctrlKey&&e!=="ctrl"&&(f+="ctrl+"),t.metaKey&&!t.ctrlKey&&e!=="meta"&&(f+="meta+"),t.shiftKey&&e!=="shift"&&(f+="shift+"),e&&(o[f+e]=!0),h&&(o[f+h]=!0,o[f+n.hotkeys.shiftNums[h]]=!0,f==="shift+"&&(o[n.hotkeys.shiftNums[h]]=!0)),s=0,c=i.length;s<c;s++)if(o[i[s]])return r.apply(this,arguments)}}}}n.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};n.each(["keydown","keyup","keypress"],function(){n.event.special[this]={add:t}})}(this.jQuery),function(n,t,i){typeof define=="function"&&define.amd?define(["jquery"],function(r){return i(r,n,t),r.mobile}):i(n.jQuery,n,t)}(this,document,function(n,t,i){(function(n,t,i,r){function h(n){while(n&&typeof n.originalEvent!="undefined")n=n.originalEvent;return n}function vt(t,i){var u=t.type,e,o,l,f,s,a,v,c,y;if(t=n.Event(t),t.type=i,e=t.originalEvent,o=n.event.props,u.search(/^(mouse|click)/)>-1&&(o=gt),e)for(v=o.length,f;v;)f=o[--v],t[f]=e[f];if(u.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),u.search(/^touch/)!==-1&&(l=h(e),u=l.touches,s=l.changedTouches,a=u&&u.length?u[0]:s&&s.length?s[0]:r,a))for(c=0,y=ct.length;c<y;c++)f=ct[c],t[f]=a[f];return t}function v(t){for(var i={},r,u;t;){r=n.data(t,o);for(u in r)r[u]&&(i[u]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function yt(t,i){for(var r;t;){if(r=n.data(t,o),r&&(!i||r[i]))return t;t=t.parentNode}return null}function pt(){l=!1}function tt(){l=!0}function wt(){s=0;y.length=0;d=!1;tt()}function bt(){pt()}function w(){it();c=setTimeout(function(){c=0;wt()},n.vmouse.resetTimerDuration)}function it(){c&&(clearTimeout(c),c=0)}function f(t,i,r){var u;return(r&&r[t]||!r&&yt(i.target,t))&&(u=vt(i,t),n(i.target).trigger(u)),u}function rt(t){var r=n.data(t.target,b),i;d||s&&s===r||(i=f("v"+t.type,t),i&&(i.isDefaultPrevented()&&t.preventDefault(),i.isPropagationStopped()&&t.stopPropagation(),i.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function ut(t){var o=h(t).touches,r,i,u;o&&o.length===1&&(r=t.target,i=v(r),i.hasVirtualBinding&&(s=ni++,n.data(r,b,s),it(),bt(),e=!1,u=h(t).touches[0],lt=u.pageX,at=u.pageY,f("vmouseover",t,i),f("vmousedown",t,i)))}function ft(n){l||(e||f("vmousecancel",n,v(n.target)),e=!0,w())}function et(t){if(!l){var i=h(t).touches[0],o=e,r=n.vmouse.moveDistanceThreshold,u=v(t.target);e=e||Math.abs(i.pageX-lt)>r||Math.abs(i.pageY-at)>r;e&&!o&&f("vmousecancel",t,u);f("vmousemove",t,u);w()}}function ot(n){if(!l){tt();var t=v(n.target),i,r;f("vmouseup",n,t);e||(i=f("vclick",n,t),i&&i.isDefaultPrevented()&&(r=h(n).changedTouches[0],y.push({touchID:s,x:r.clientX,y:r.clientY}),d=!0));f("vmouseout",n,t);e=!1;w()}}function st(t){var i=n.data(t,o),r;if(i)for(r in i)if(i[r])return!0;return!1}function ht(){}function kt(t){var i=t.substr(1);return{setup:function(){st(this)||n.data(this,o,{});var r=n.data(this,o);r[t]=!0;u[t]=(u[t]||0)+1;u[t]===1&&p.bind(i,rt);n(this).bind(i,ht);g&&(u.touchstart=(u.touchstart||0)+1,u.touchstart===1&&p.bind("touchstart",ut).bind("touchend",ot).bind("touchmove",et).bind("scroll",ft))},teardown:function(){--u[t];u[t]||p.unbind(i,rt);g&&(--u.touchstart,u.touchstart||p.unbind("touchstart",ut).unbind("touchmove",et).unbind("touchend",ot).unbind("scroll",ft));var r=n(this),f=n.data(this,o);f&&(f[t]=!1);r.unbind(i,ht);st(this)||r.removeData(o)}}}var o="virtualMouseBindings",b="virtualTouchID",k="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),ct="clientX clientY pageX pageY screenX screenY".split(" "),dt=n.event.mouseHooks?n.event.mouseHooks.props:[],gt=n.event.props.concat(dt),u={},c=0,lt=0,at=0,e=!1,y=[],d=!1,l=!1,g="addEventListener"in i,p=n(i),ni=1,s=0,nt,a;for(n.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},a=0;a<k.length;a++)n.event.special[k[a]]=kt(k[a]);g&&i.addEventListener("click",function(t){var f=y.length,e=t.target,o,s,i,r,u,h;if(f)for(o=t.clientX,s=t.clientY,nt=n.vmouse.clickDistanceThreshold,i=e;i;){for(r=0;r<f;r++)if(u=y[r],h=0,i===e&&Math.abs(u.x-o)<nt&&Math.abs(u.y-s)<nt||n.data(i,b)===u.touchID){t.preventDefault();t.stopPropagation();return}i=i.parentNode}},!0)})(n,t,i),function(n){n.mobile={}}(n),function(n){var t={touch:"ontouchend"in i};n.mobile.support=n.mobile.support||{};n.extend(n.support,t);n.extend(n.mobile.support,t)}(n),function(n,t,r){function f(t,i,u,f){var e=u.type;u.type=i;f?n.event.trigger(u,r,t):n.event.dispatch.call(t,u);u.type=e}var u=n(i),e=n.mobile.support.touch,s="touchmove scroll",h=e?"touchstart":"mousedown",c=e?"touchend":"mouseup",o=e?"touchmove":"mousemove";n.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,i){n.fn[i]=function(n){return n?this.bind(i,n):this.trigger(i)};n.attrFn&&(n.attrFn[i]=!0)});n.event.special.scrollstart={enabled:!0,setup:function(){function i(n,i){t=i;f(r,t?"scrollstart":"scrollstop",n)}var r=this,e=n(r),t,u;e.bind(s,function(r){n.event.special.scrollstart.enabled&&(t||i(r,!0),clearTimeout(u),u=setTimeout(function(){i(r,!1)},50))})},teardown:function(){n(this).unbind(s)}};n.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var i=this,r=n(i),t=!1;r.bind("vmousedown",function(e){function o(){clearTimeout(l)}function s(){o();r.unbind("vclick",h).unbind("vmouseup",o);u.unbind("vmousecancel",s)}function h(n){s();t||c!==n.target?t&&n.stopPropagation():f(i,"tap",n)}if(t=!1,e.which&&e.which!==1)return!1;var c=e.target,l;r.bind("vmouseup",o).bind("vclick",h);u.bind("vmousecancel",s);l=setTimeout(function(){n.event.special.tap.emitTapOnTaphold||(t=!0);f(i,"taphold",n.Event("taphold",{target:c}))},n.event.special.tap.tapholdThreshold)})},teardown:function(){n(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");u.unbind("vmousecancel")}};n.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(n){var u=t.pageXOffset,f=t.pageYOffset,i=n.clientX,r=n.clientY;return n.pageY===0&&Math.floor(r)>Math.floor(n.pageY)||n.pageX===0&&Math.floor(i)>Math.floor(n.pageX)?(i=i-u,r=r-f):(r<n.pageY-f||i<n.pageX-u)&&(i=n.pageX-u,r=n.pageY-f),{x:i,y:r}},start:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=n.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:n(t.target)}},stop:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=n.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(t,i,r,u){if(i.time-t.time<n.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-i.coords[0])>n.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-i.coords[1])<n.event.special.swipe.verticalDistanceThreshold){var e=t.coords[0]>i.coords[0]?"swipeleft":"swiperight";return f(r,"swipe",n.Event("swipe",{target:u,swipestart:t,swipestop:i}),!0),f(r,e,n.Event(e,{target:u,swipestart:t,swipestop:i}),!0),!0}return!1},eventInProgress:!1,setup:function(){var i,r=this,f=n(r),t={};i=n.data(this,"mobile-events");i||(i={length:0},n.data(this,"mobile-events",i));i.length++;i.swipe=t;t.start=function(i){if(!n.event.special.swipe.eventInProgress){n.event.special.swipe.eventInProgress=!0;var e,s=n.event.special.swipe.start(i),h=i.target,f=!1;t.move=function(t){s&&(e=n.event.special.swipe.stop(t),f||(f=n.event.special.swipe.handleSwipe(s,e,r,h),f&&(n.event.special.swipe.eventInProgress=!1)),Math.abs(s.coords[0]-e.coords[0])>n.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())};t.stop=function(){f=!0;n.event.special.swipe.eventInProgress=!1;u.off(o,t.move);t.move=null};u.on(o,t.move).one(c,t.stop)}};f.on(h,t.start)},teardown:function(){var i,t;i=n.data(this,"mobile-events");i&&(t=i.swipe,delete i.swipe,i.length--,i.length===0&&n.removeData(this,"mobile-events"));t&&(t.start&&n(this).off(h,t.start),t.move&&u.off(o,t.move),t.stop&&u.off(c,t.stop))}};n.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,i){n.event.special[t]={setup:function(){n(this).bind(i,n.noop)},teardown:function(){n(this).unbind(i)}}})}(n,this)}),function(n,t){function yt(t){n.extend(!0,nt,t)}function vi(u,f,e){function ri(n){a?b()&&(ft(),yt(n)):ui()}function ui(){sr=f.theme?"ui":"fc";u.addClass("fc");f.isRTL?u.addClass("fc-rtl"):u.addClass("fc-ltr");f.theme&&u.addClass("ui-widget");a=n("<div class='fc-content' style='position:relative'/>").prependTo(u);p=new yi(s,f);d=p.render();d&&u.prepend(d);vt(f.defaultView);f.handleWindowResize&&n(window).resize(kt);at()||lt()}function lt(){setTimeout(function(){!o.start&&at()&&y()},0)}function fi(){o&&(k("viewDestroy",o,o,o.element),o.triggerEventDestroy());n(window).unbind("resize",kt);p.destroy();a.remove();u.removeClass("fc fc-rtl ui-widget")}function b(){return u.is(":visible")}function at(){return n("body").is(":visible")}function vt(n){o&&n==o.name||ei(n)}function ei(t){v++;o&&(k("viewDestroy",o,o,o.element),ut(),o.triggerEventDestroy(),ni(),o.element.remove(),p.deactivateButton(o.name));p.activateButton(t);o=new h[t](n("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(a),s);y();ti();v--}function y(n){(!o.start||n||l<o.start||l>=o.end)&&b()&&yt(n)}function yt(n){v++;o.start&&(k("viewDestroy",o,o,o.element),ut(),tt());ni();o.render(l,n||0);bt();ti();(o.afterRender||rr)();li();ai();k("viewRender",o,o,o.element);o.trigger("viewDisplay",et);v--;si()}function pt(){b()&&(ut(),tt(),ft(),bt(),nt())}function ft(){ht=f.contentHeight?f.contentHeight:f.height?f.height-(d?d.height():0)-w(a):Math.round(a.width()/Math.max(f.aspectRatio,.5))}function bt(){ht===t&&ft();v++;o.setWidth(a.width());o.setHeight(ht);v--;ot=u.outerWidth()}function kt(){if(!v)if(o.start){var n=++ii;setTimeout(function(){n==ii&&!v&&b()&&ot!=(ot=u.outerWidth())&&(v++,pt(),o.trigger("windowResize",et),v--)},200)}else lt()}function oi(){tt();gt()}function dt(n){tt();nt(n)}function nt(n){b()&&(o.setEventData(ct),o.renderEvents(ct,n),o.trigger("eventAfterAllRender"))}function tt(){o.triggerEventDestroy();o.clearEvents();o.clearEventData()}function si(){!f.lazyFetching||er(o.visStart,o.visEnd)?gt():nt()}function gt(){or(o.visStart,o.visEnd)}function hi(n){ct=n;nt()}function ci(n){dt(n)}function li(){p.updateTitle(o.title)}function ai(){var n=new Date;n>=o.start&&n<o.end?p.disableButton("today"):p.enableButton("today")}function vi(n,i,r){o.select(n,i,r===t?!0:r)}function ut(){o&&o.unselect()}function wi(){y(-1)}function bi(){y(1)}function ki(){it(l,-1);y()}function di(){it(l,1);y()}function gi(){l=new Date;y()}function nr(n,t,r){n instanceof Date?l=i(n):wt(l,n,t,r);y()}function tr(n,i,u){n!==t&&it(l,n);i!==t&&rt(l,i);u!==t&&r(l,u);y()}function ir(){return i(l)}function ni(){a.css({width:"100%",height:a.height(),overflow:"hidden"})}function ti(){a.css({width:"",height:"",overflow:""})}function ur(){return o}function fr(n,i){if(i===t)return f[n];(n=="height"||n=="contentHeight"||n=="aspectRatio")&&(f[n]=i,pt())}function k(n,t){if(f[n])return f[n].apply(t||et,Array.prototype.slice.call(arguments,2))}var s=this;s.options=f;s.render=ri;s.destroy=fi;s.refetchEvents=oi;s.reportEvents=hi;s.reportEventChange=ci;s.rerenderEvents=dt;s.changeView=vt;s.select=vi;s.unselect=ut;s.prev=wi;s.next=bi;s.prevYear=ki;s.nextYear=di;s.today=gi;s.gotoDate=nr;s.incrementDate=tr;s.formatDate=function(n,t){return c(n,t,f)};s.formatDates=function(n,t,i){return st(n,t,i,f)};s.getDate=ir;s.getView=ur;s.option=fr;s.trigger=k;pi.call(s,f,e);var er=s.isFetchNeeded,or=s.fetchEvents,et=u[0],p,d,a,sr,o,ot,ht,ii=0,v=0,l=new Date,ct=[],g;wt(l,f.year,f.month,f.date);f.droppable&&n(document).bind("dragstart",function(t,i){var u=t.target,e=n(u),r;e.parents(".fc").length||(r=f.dropAccept,(n.isFunction(r)?r.call(u,e):e.is(r))&&(g=u,o.dragStart(g,t,i)))}).bind("dragstop",function(n,t){g&&(o.dragStop(g,n,t),g=null)})}function yi(t,i){function o(){r=i.theme?"ui":"fc";var t=i.header;if(t)return u=n("<table class='fc-header' style='width:100%'/>").append(n("<tr/>").append(e("left")).append(e("center")).append(e("right")))}function s(){u.remove()}function e(u){var f=n("<td class='fc-header-"+u+"'/>"),e=i.header[u];return e&&n.each(e.split(" "),function(u){u>0&&f.append("<span class='fc-header-space'/>");var e;n.each(this.split(","),function(u,o){var c;if(o=="title")f.append("<span class='fc-header-title'><h2>&nbsp;<\/h2><\/span>"),e&&e.addClass(r+"-corner-right"),e=null;else if(t[o]?c=t[o]:h[o]&&(c=function(){s.removeClass(r+"-state-hover");t.changeView(o)}),c){var l=i.theme?ct(i.buttonIcons,o):null,a=ct(i.buttonText,o),s=n("<span class='fc-button fc-button-"+o+" "+r+"-state-default' role='button' tabindex='0'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/><\/span>":a)+"<\/span>").keydown(function(n){s.hasClass(r+"-state-disabled")||(n.keyCode==13||n.keyCode==32)&&c()}).click(function(){s.hasClass(r+"-state-disabled")||c()}).mousedown(function(){s.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")}).mouseup(function(){s.removeClass(r+"-state-down")}).hover(function(){s.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")},function(){s.removeClass(r+"-state-hover").removeClass(r+"-state-down")}).appendTo(f);b(s);e||s.addClass(r+"-corner-left");e=s}});e&&e.addClass(r+"-corner-right")}),f}function c(n){u.find("h2").html(n)}function l(n){u.find("span.fc-button-"+n).addClass(r+"-state-active")}function a(n){u.find("span.fc-button-"+n).removeClass(r+"-state-active")}function v(n){u.find("span.fc-button-"+n).addClass(r+"-state-disabled")}function y(n){u.find("span.fc-button-"+n).removeClass(r+"-state-disabled")}var f=this,u,r;f.render=o;f.destroy=s;f.updateTitle=c;f.activateButton=l;f.deactivateButton=a;f.disableButton=v;f.enableButton=y;u=n([])}function pi(r,u){function ht(n,t){return!h||n<h||t>v}function ct(n,t){var u,r,i;for(h=n,v=t,e=[],u=++k,r=s.length,p=r,i=0;i<r;i++)g(s[i],u)}function g(t,i){nt(t,function(u){if(i==k){if(u){r.eventDataTransform&&(u=n.map(u,r.eventDataTransform));t.eventDataTransform&&(u=n.map(u,t.eventDataTransform));for(var f=0;f<u.length;f++)u[f].source=t,c(u[f]);e=e.concat(u)}p--;p||l(e)}})}function nt(t,u){for(var o,e,y,c=f.sourceFetchers,s=0;s<c.length;s++){if(o=c[s](t,h,v,u),o===!0)return;if(typeof o=="object"){nt(o,u);return}}if(e=t.events,e)n.isFunction(e)?(it(),e(i(h),i(v),function(n){u(n);rt()})):n.isArray(e)?u(e):u();else if(y=t.url,y){var b=t.success,k=t.error,g=t.complete,tt=n.isFunction(t.data)?t.data():t.data,l=n.extend({},tt||{}),p=a(t.startParam,r.startParam),w=a(t.endParam,r.endParam);p&&(l[p]=Math.round(+h/1e3));w&&(l[w]=Math.round(+v/1e3));it();n.ajax(n.extend({},li,t,{data:l,success:function(t){t=t||[];var i=d(b,this,arguments);n.isArray(i)&&(t=i);u(t)},error:function(){d(k,this,arguments);u()},complete:function(){d(g,this,arguments);rt()}}))}else u()}function lt(n){n=tt(n);n&&(p++,g(n,k))}function tt(t){return n.isFunction(t)||n.isArray(t)?t={events:t}:typeof t=="string"&&(t={url:t}),typeof t=="object"?(bt(t),s.push(t),t):void 0}function at(t){s=n.grep(s,function(n){return!ut(n,t)});e=n.grep(e,function(n){return!ut(n.source,t)});l(e)}function vt(n){for(var f=e.length,t,r=w().defaultEventEnd,o=n.start-n._start,u=n.end?n.end-(n._end||r(n)):0,i=0;i<f;i++)t=e[i],t._id==n._id&&t!=n&&(t.start=new Date(+t.start+o),t.end=n.end?t.end?new Date(+t.end+u):new Date(+r(t)+u):null,t.title=n.title,t.url=n.url,t.allDay=n.allDay,t.className=n.className,t.editable=n.editable,t.color=n.color,t.backgroundColor=n.backgroundColor,t.borderColor=n.borderColor,t.textColor=n.textColor,c(t));c(n);l(e)}function yt(n,t){c(n);n.source||(t&&(b.events.push(n),n.source=b),e.push(n));l(e)}function pt(t){var i,r;if(t)for(n.isFunction(t)||(r=t+"",t=function(n){return n._id==r}),e=n.grep(e,t,!0),i=0;i<s.length;i++)n.isArray(s[i].events)&&(s[i].events=n.grep(s[i].events,t,!0));else for(e=[],i=0;i<s.length;i++)n.isArray(s[i].events)&&(s[i].events=[]);l(e)}function wt(t){return n.isFunction(t)?n.grep(e,t):t?(t+="",n.grep(e,function(n){return n._id==t})):e}function it(){st++||ot("loading",null,!0,w())}function rt(){--st||ot("loading",null,!1,w())}function c(n){var u=n.source||{},f=a(u.ignoreTimezone,r.ignoreTimezone);n._id=n._id||(n.id===t?"_fc"+ai++:n.id+"");n.date&&(n.start||(n.start=n.date),delete n.date);n._start=i(n.start=ft(n.start,f));n.end=ft(n.end,f);n.end&&n.end<=n.start&&(n.end=null);n._end=n.end?i(n.end):null;n.allDay===t&&(n.allDay=a(u.allDayDefault,r.allDayDefault));n.className?typeof n.className=="string"&&(n.className=n.className.split(/\s+/)):n.className=[]}function bt(n){var i,t;for(n.className?typeof n.className=="string"&&(n.className=n.className.split(/\s+/)):n.className=[],i=f.sourceNormalizers,t=0;t<i.length;t++)i[t](n)}function ut(n,t){return n&&t&&et(n)==et(t)}function et(n){return(typeof n=="object"?n.events||n.url:"")||n}var o=this,y;o.isFetchNeeded=ht;o.fetchEvents=ct;o.addEventSource=lt;o.removeEventSource=at;o.updateEvent=vt;o.renderEvent=yt;o.removeEvents=pt;o.clientEvents=wt;o.normalizeEvent=c;var ot=o.trigger,w=o.getView,l=o.reportEvents,b={events:[]},s=[b],h,v,k=0,p=0,st=0,e=[];for(y=0;y<u.length;y++)tt(u[y])}function it(n,t,i){return n.setFullYear(n.getFullYear()+t),i||s(n),n}function rt(n,t,r){if(+n){var f=n.getMonth()+t,u=i(n);for(u.setDate(1),u.setMonth(f),n.setMonth(f),r||s(n);n.getMonth()!=u.getMonth();)n.setDate(n.getDate()+(n<u?1:-1))}return n}function r(n,t,r){if(+n){var f=n.getDate()+t,u=i(n);u.setHours(9);u.setDate(f);n.setDate(f);r||s(n);ut(n,u)}return n}function ut(n,t){if(+n)while(n.getDate()!=t.getDate())n.setTime(+n+(n<t?1:-1)*tu)}function u(n,t){return n.setMinutes(n.getMinutes()+t),n}function s(n){return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n}function i(n,t){return t?s(new Date(+n)):new Date(+n)}function pt(){var t=0,n;do n=new Date(1970,t++,1);while(n.getHours());return n}function v(n,t){return Math.round((i(n,!0)-i(t,!0))/nu)}function wt(n,i,r,u){i!==t&&i!=n.getFullYear()&&(n.setDate(1),n.setMonth(0),n.setFullYear(i));r!==t&&r!=n.getMonth()&&(n.setDate(1),n.setMonth(r));u!==t&&n.setDate(u)}function ft(n,i){return typeof n=="object"?n:typeof n=="number"?new Date(n*1e3):typeof n=="string"?n.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(n)*1e3):(i===t&&(i=!0),et(n,i)||(n?new Date(n):null)):null}function et(n,t){var i=n.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),r,u,f;return i?(r=new Date(i[1],0,1),t||!i[13]?(u=new Date(i[1],0,1,9,0),i[3]&&(r.setMonth(i[3]-1),u.setMonth(i[3]-1)),i[5]&&(r.setDate(i[5]),u.setDate(i[5])),ut(r,u),i[7]&&r.setHours(i[7]),i[8]&&r.setMinutes(i[8]),i[10]&&r.setSeconds(i[10]),i[12]&&r.setMilliseconds(Number("0."+i[12])*1e3),ut(r,u)):(r.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),r.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?Number("0."+i[12])*1e3:0),i[14]&&(f=Number(i[16])*60+(i[18]?Number(i[18]):0),f*=i[15]=="-"?1:-1,r=new Date(+r+f*6e4))),r):null}function ot(n){var t,i;return typeof n=="number"?n*60:typeof n=="object"?n.getHours()*60+n.getMinutes():(t=n.match(/(\d+)(?::(\d+))?\s*(\w+)?/),t?(i=parseInt(t[1],10),t[3]&&(i%=12,t[3].toLowerCase().charAt(0)=="p"&&(i+=12)),i*60+(t[2]?parseInt(t[2],10):0)):void 0)}function c(n,t,i){return st(n,null,t,i)}function st(n,t,i,r){var a;r=r||nt;for(var s,e=n,v=t,l=i.length,o,u,y,h="",f=0;f<l;f++)if(o=i.charAt(f),o=="'"){for(u=f+1;u<l;u++)if(i.charAt(u)=="'"){e&&(h+=u==f+1?"'":i.substring(f+1,u),f=u);break}}else if(o=="("){for(u=f+1;u<l;u++)if(i.charAt(u)==")"){s=c(e,i.substring(f+1,u),r);parseInt(s.replace(/\D/,""),10)&&(h+=s);f=u;break}}else if(o=="["){for(u=f+1;u<l;u++)if(i.charAt(u)=="]"){a=i.substring(f+1,u);s=c(e,a,r);s!=c(v,a,r)&&(h+=s);f=u;break}}else if(o=="{")e=t,v=n;else if(o=="}")e=n,v=t;else{for(u=l;u>f;u--)if(y=vt[i.substring(f,u)]){e&&(h+=y(e,r));f=u-1;break}u==f&&e&&(h+=o)}return h}function wi(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1}function y(n){return n.end?bi(n.end,n.allDay):r(i(n.start),1)}function bi(n,t){return n=i(n),t||n.getHours()||n.getMinutes()?r(n,1):s(n)}function bt(i,r,u){i.unbind("mouseover").mouseover(function(i){for(var f=i.target,o,s,e;f!=this;)o=f,f=f.parentNode;(s=o._fci)!==t&&(o._fci=t,e=r[s],u(e.event,e.element,e),n(i.target).trigger(i));i.stopPropagation()})}function p(t,i,r){for(var u=0,f;u<t.length;u++)f=n(t[u]),f.width(Math.max(0,i-ht(f,r)))}function kt(t,i,r){for(var u=0,f;u<t.length;u++)f=n(t[u]),f.height(Math.max(0,i-w(f,r)))}function ht(n,t){return ki(n)+gi(n)+(t?di(n):0)}function ki(t){return(parseFloat(n.css(t[0],"paddingLeft",!0))||0)+(parseFloat(n.css(t[0],"paddingRight",!0))||0)}function di(t){return(parseFloat(n.css(t[0],"marginLeft",!0))||0)+(parseFloat(n.css(t[0],"marginRight",!0))||0)}function gi(t){return(parseFloat(n.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(n.css(t[0],"borderRightWidth",!0))||0)}function w(n,t){return nr(n)+ir(n)+(t?tr(n):0)}function nr(t){return(parseFloat(n.css(t[0],"paddingTop",!0))||0)+(parseFloat(n.css(t[0],"paddingBottom",!0))||0)}function tr(t){return(parseFloat(n.css(t[0],"marginTop",!0))||0)+(parseFloat(n.css(t[0],"marginBottom",!0))||0)}function ir(t){return(parseFloat(n.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(n.css(t[0],"borderBottomWidth",!0))||0)}function rr(){}function dt(n,t){return n-t}function gt(n){return Math.max.apply(Math,n)}function l(n){return(n<10?"0":"")+n}function ct(n,i){if(n[i]!==t)return n[i];for(var f=i.split(/(?=[A-Z])/),r=f.length-1,u;r>=0;r--)if(u=n[f[r].toLowerCase()],u!==t)return u;return n[""]}function e(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function b(n){n.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function k(n){n.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function ni(n,t){var i=n.source||{},u=n.color,f=i.color,e=t("eventColor"),o=n.backgroundColor||u||i.backgroundColor||f||t("eventBackgroundColor")||e,s=n.borderColor||u||i.borderColor||f||t("eventBorderColor")||e,h=n.textColor||i.textColor||t("eventTextColor"),r=[];return o&&r.push("background-color:"+o),s&&r.push("border-color:"+s),h&&r.push("color:"+h),r.join(";")}function d(t,i,r){if(n.isFunction(t)&&(t=[t]),t){for(var u,f=0;f<t.length;f++)u=t[f].apply(i,r)||u;return u}}function a(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==t)return arguments[n]}function ur(n,t){function o(n,t){var p,l,w,a,o,b,y;t&&(rt(n,t),n.setDate(1));p=f("firstDay");l=i(n,!0);l.setDate(1);w=rt(i(l),1);a=i(l);r(a,-((a.getDay()-p+7)%7));e(a);o=i(w);r(o,(7-o.getDay()+p)%7);e(o,-1,!0);b=h();y=Math.round(v(o,a)/7);f("weekMode")=="fixed"&&(r(o,(6-y)*7),y=6);u.title=c(l,f("titleFormat"));u.start=l;u.end=w;u.visStart=a;u.visEnd=o;s(y,b,!0)}var u=this;u.render=o;lt.call(u,n,t,"month");var f=u.opt,s=u.renderBasic,e=u.skipHiddenDays,h=u.getCellsPerWeek,c=t.formatDate}function fr(n,t){function o(n,t){var o,v;t&&r(n,t*7);var l=r(i(n),-((n.getDay()-f("firstDay")+7)%7)),y=r(i(l),7),a=i(l);e(a);o=i(y);e(o,-1,!0);v=h();u.start=l;u.end=y;u.visStart=a;u.visEnd=o;u.title=c(a,r(i(o),-1),f("titleFormat"));s(1,v,!1)}var u=this;u.render=o;lt.call(u,n,t,"basicWeek");var f=u.opt,s=u.renderBasic,e=u.skipHiddenDays,h=u.getCellsPerWeek,c=t.formatDates}function er(n,t){function f(n,t){t&&r(n,t);s(n,t<0?-1:1);var f=i(n,!0),c=r(i(f),1);u.title=h(n,e("titleFormat"));u.start=u.visStart=f;u.end=u.visEnd=c;o(1,1,!1)}var u=this;u.render=f;lt.call(u,n,t,"basicDay");var e=u.opt,o=u.renderBasic,s=u.skipHiddenDays,h=t.formatDate}function lt(t,u,f){function vi(n,t,i){c=n;l=t;ui=i;yi();rt||pi();wi()}function yi(){nt=a("theme")?"ui":"fc";ei=a("columnFormat");ct=a("weekNumbers");li=a("weekNumberTitle");ai=a("weekNumberCalculation")!="iso"?"w":"W"}function pi(){ti=n("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function wi(){var i=bi();d&&d.remove();d=n(i).appendTo(t);v=d.find("thead");vt=v.find(".fc-day-header");rt=d.find("tbody");h=rt.find("tr");ut=rt.find(".fc-day");dt=h.find("td:first-child");gt=h.eq(0).find(".fc-day > div");ni=h.eq(0).find(".fc-day-content > div");k(v.add(v.find("tr")));k(h);h.eq(0).addClass("fc-first");h.filter(":last").addClass("fc-last");ut.each(function(t,i){var r=y(Math.floor(t/l),t%l);it("dayRender",o,r,n(i))});wt(ut)}function bi(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+ki()+di()+"<\/table>"}function ki(){var r=nt+"-widget-header",n="",t,i;for(n+="<thead><tr>",ct&&(n+="<th class='fc-week-number "+r+"'>"+e(li)+"<\/th>"),t=0;t<l;t++)i=y(0,t),n+="<th class='fc-day-header fc-"+tt[i.getDay()]+" "+r+"'>"+e(at(i,ei))+"<\/th>";return n+"<\/tr><\/thead>"}function di(){var u=nt+"-widget-content",n="",t,i,r;for(n+="<tbody>",t=0;t<c;t++){for(n+="<tr class='fc-week'>",ct&&(r=y(t,0),n+="<td class='fc-week-number "+u+"'><div>"+e(at(r,ai))+"<\/div><\/td>"),i=0;i<l;i++)r=y(t,i),n+=gi(r);n+="<\/tr>"}return n+"<\/tbody>"}function gi(n){var u=nt+"-widget-content",f=o.start.getMonth(),r=s(new Date),i="",t=["fc-day","fc-"+tt[n.getDay()],u];return n.getMonth()!=f&&t.push("fc-other-month"),+n==+r?t.push("fc-today",nt+"-state-highlight"):n<r?t.push("fc-past"):t.push("fc-future"),i+="<td class='"+t.join(" ")+"' data-date='"+at(n,"yyyy-MM-dd")+"'><div>",ui&&(i+="<div class='fc-day-number'>"+n.getDate()+"<\/div>"),i+"<div class='fc-day-content'><div style='position:relative'>&nbsp;<\/div><\/div><\/div><\/td>"}function nr(t){ri=t;var r=ri-v.height(),i,u,f;a("weekMode")=="variable"?i=u=Math.floor(r/(c==1?2:6)):(i=Math.floor(r/c),u=r-i*(c-1));dt.each(function(t,r){t<c&&(f=n(r),f.find("> div").css("min-height",(t==c-1?u:i)-w(f)))})}function tr(n){ii=n;st.clear();ht.clear();pt=0;ct&&(pt=v.find("th.fc-week-number").outerWidth());yt=Math.floor((ii-pt)/l);p(vt.slice(0,-1),yt)}function wt(n){n.click(ir).mousedown(br)}function ir(t){if(!a("selectable")){var i=et(n(this).data("date"));it("dayClick",this,i,!0,t)}}function bt(n,t,i){var f,u,r;for(i&&ft.build(),f=dr(n,t),u=0;u<f.length;u++)r=f[u],wt(kt(r.row,r.leftCol,r.row,r.rightCol))}function kt(n,i,r,u){var f=ft.rect(n,i,r,u,t);return wr(f,t)}function rr(n){return i(n)}function ur(n,t){bt(n,r(i(t),1),!0)}function fr(){lt()}function er(n,t,i){var r=kr(n),u=ut[r.row*l+r.col];it("dayClick",u,n,t,i)}function sr(n,t){ot.start(function(n){lt();n&&kt(n.row,n.col,n.row,n.col)},t)}function hr(n,t,i){var r=ot.stop(),u;lt();r&&(u=y(r),it("drop",n,u,!0,t,i))}function cr(n){return i(n.start)}function lr(n){return st.left(n)}function ar(n){return st.right(n)}function vr(n){return ht.left(n)}function yr(n){return ht.right(n)}function pr(n){return h.eq(n)}var o=this;o.renderBasic=vi;o.setHeight=nr;o.setWidth=tr;o.renderDayOverlay=bt;o.defaultSelectionEnd=rr;o.renderSelection=ur;o.clearSelection=fr;o.reportDayClick=er;o.dragStart=sr;o.dragStop=hr;o.defaultEventEnd=cr;o.getHoverListener=function(){return ot};o.colLeft=lr;o.colRight=ar;o.colContentLeft=vr;o.colContentRight=yr;o.getIsCellAllDay=function(){return!0};o.allDayRow=pr;o.getRowCnt=function(){return c};o.getColCnt=function(){return l};o.getColWidth=function(){return yt};o.getDaySegmentContainer=function(){return ti};fi.call(o,t,u,f);si.call(o);oi.call(o);or.call(o);var a=o.opt,it=o.trigger,wr=o.renderOverlay,lt=o.clearOverlays,br=o.daySelectionMousedown,y=o.cellToDate,kr=o.dateToCell,dr=o.rangeToSegments,at=u.formatDate,d,v,vt,rt,h,ut,dt,gt,ni,ti,ii,ri,yt,pt,c,l,ui,ft,ot,st,ht,nt,ei,ct,li,ai;b(t.addClass("fc-grid"));ft=new hi(function(t,i){var f,r,u;vt.each(function(t,e){f=n(e);r=f.offset().left;t&&(u[1]=r);u=[r];i[t]=u});u[1]=r+f.outerWidth();h.each(function(i,e){i<c&&(f=n(e),r=f.offset().top,i&&(u[1]=r),u=[r],t[i]=u)});u[1]=r+f.outerHeight()});ot=new ci(ft);st=new g(function(n){return gt.eq(n)});ht=new g(function(n){return ni.eq(n)})}function or(){function t(t,i){n.renderDayEvents(t,i)}function i(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t;n.clearEvents=i;ei.call(n)}function sr(n,t){function o(n,t){var o,v;t&&r(n,t*7);var l=r(i(n),-((n.getDay()-f("firstDay")+7)%7)),y=r(i(l),7),a=i(l);e(a);o=i(y);e(o,-1,!0);v=h();u.title=c(a,r(i(o),-1),f("titleFormat"));u.start=l;u.end=y;u.visStart=a;u.visEnd=o;s(v)}var u=this;u.render=o;ti.call(u,n,t,"agendaWeek");var f=u.opt,s=u.renderAgenda,e=u.skipHiddenDays,h=u.getCellsPerWeek,c=t.formatDates}function hr(n,t){function f(n,t){t&&r(n,t);s(n,t<0?-1:1);var f=i(n,!0),c=r(i(f),1);u.title=h(n,e("titleFormat"));u.start=u.visStart=f;u.end=u.visEnd=c;o(1)}var u=this;u.render=f;ti.call(u,n,t,"agendaDay");var e=u.opt,o=u.renderAgenda,s=u.skipHiddenDays,h=t.formatDate}function ti(f,o,h){function uu(n){it=n;fu();d?ur():eu()}function fu(){et=l("theme")?"ui":"fc";nu=l("isRTL");st=ot(l("minTime"));ai=ot(l("maxTime"));tu=l("columnFormat");iu=l("weekNumbers");rr=l("weekNumberTitle");ru=l("weekNumberCalculation")!="iso"?"w":"W";vt=l("snapMinutes")||l("slotMinutes")}function eu(){var e=et+"-widget-header",c=et+"-widget-content",r,t,o,h,s;for(ur(),nt=n("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(f),l("allDaySlot")?(ki=n("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(nt),r="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+e+" fc-agenda-axis'>"+l("allDayText")+"<\/th><td><div class='fc-day-content'><div style='position:relative'/><\/div><\/td><th class='"+e+" fc-agenda-gutter'>&nbsp;<\/th><\/tr><\/table>",lt=n(r).appendTo(nt),ii=lt.find("tr"),fr(ii.find("td")),nt.append("<div class='fc-agenda-divider "+e+"'><div class='fc-agenda-divider-inner'/><\/div>")):ki=n([]),y=n("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(nt),v=n("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(y),dr=n("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(v),r="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",t=pt(),h=u(i(t),ai),u(t,st),tr=0,o=0;t<h;o++)s=t.getMinutes(),r+="<tr class='fc-slot"+o+" "+(s?"fc-minor":"")+"'><th class='fc-agenda-axis "+e+"'>"+(!1||!s?pi(t,l("axisFormat")):"&nbsp;")+"<\/th><td class='"+c+"'><div style='position:relative'>&nbsp;<\/div><\/td><\/tr>",u(t,l("slotMinutes")),tr++;r+="<\/tbody><\/table>";ft=n(r).appendTo(v);vi(ft.find("td"))}function ur(){var t=ou();d&&d.remove();d=n(t).appendTo(f);wt=d.find("thead");wi=wt.find("th").slice(1,-1);bt=d.find("tbody");ut=bt.find("td").slice(0,-1);bi=ut.find("> div");wr=ut.find(".fc-day-content > div");br=ut.eq(0);kr=bi.eq(0);k(wt.add(wt.find("tr")));k(bt.add(bt.find("tr")))}function ou(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+su()+hu()+"<\/table>"}function su(){var u=et+"-widget-header",n,t="",i,r;for(t+="<thead><tr>",iu?(n=ct(0,0),i=pi(n,ru),nu?i+=rr:i=rr+i,t+="<th class='fc-agenda-axis fc-week-number "+u+"'>"+e(i)+"<\/th>"):t+="<th class='fc-agenda-axis "+u+"'>&nbsp;<\/th>",r=0;r<it;r++)n=ct(0,r),t+="<th class='fc-"+tt[n.getDay()]+" fc-col"+r+" "+u+"'>"+e(pi(n,tu))+"<\/th>";return t+("<th class='fc-agenda-gutter "+u+"'>&nbsp;<\/th><\/tr><\/thead>")}function hu(){var h=et+"-widget-header",f=et+"-widget-content",i,e=s(new Date),n,r,o,t,u="";for(u+="<tbody><tr><th class='fc-agenda-axis "+h+"'>&nbsp;<\/th>",r="",n=0;n<it;n++)i=ct(0,n),t=["fc-col"+n,"fc-"+tt[i.getDay()],f],+i==+e?t.push(et+"-state-highlight","fc-today"):i<e?t.push("fc-past"):t.push("fc-future"),o="<td class='"+t.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;<\/div><\/div><\/div><\/td>",r+=o;return u+=r,u+("<td class='fc-agenda-gutter "+f+"'>&nbsp;<\/td><\/tr><\/tbody>")}function cu(n){n===t&&(n=gr);gr=n;ir={};var i=bt.position().top,r=y.position().top,u=Math.min(n-i,ft.height()+r+1);kr.height(u-w(br));nt.css("top",i);y.height(u-r-1);gi=ft.find("tr:first").height()+1;nr=l("slotMinutes")/vt;ui=gi/nr}function lu(t){var i,r,u;cf=t;ei.clear();li.clear();i=wt.find("th:first");lt&&(i=i.add(lt.find("th:first")));i=i.add(ft.find("th:first"));at=0;p(i.width("").each(function(t,i){at=Math.max(at,n(i).outerWidth())}),at);r=d.find(".fc-agenda-gutter");lt&&(r=r.add(lt.find("th.fc-agenda-gutter")));u=y[0].clientWidth;di=y.width()-u;di?(p(r,di),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last");ri=Math.floor((u-at)/it);p(wi.slice(0,-1),ri)}function au(){function n(){y.scrollTop(u)}var t=pt(),r=i(t),u;r.setHours(l("firstHour"));u=ht(t,r)+1;n();setTimeout(n,0)}function vu(){au()}function fr(n){n.click(er).mousedown(of)}function vi(n){n.click(er).mousedown(tf)}function er(n){var i,u;if(!l("selectable")){var r=Math.min(it-1,Math.floor((n.pageX-d.offset().left-at)/ri)),t=ct(0,r),f=this.parentNode.className.match(/fc-slot(\d+)/);f?(i=parseInt(f[1])*l("slotMinutes"),u=Math.floor(i/60),t.setHours(u),t.setMinutes(i%60+st),ti("dayClick",ut[r],t,!1,n)):ti("dayClick",ut[r],t,!0,n)}}function or(n,t,i){var f,u,r;for(i&&rt.build(),f=hf(n,t),u=0;u<f.length;u++)r=f[u],fr(sr(r.row,r.leftCol,r.row,r.rightCol))}function sr(n,t,i,r){var u=rt.rect(n,t,i,r,nt);return yr(u,nt)}function hr(n,t){for(var u=0;u<it;u++){var f=ct(0,u),c=r(i(f),1),o=new Date(Math.max(f,n)),s=new Date(Math.min(c,t));if(o<s){var e=rt.rect(0,u,0,u,v),h=ht(f,o),l=ht(f,s);e.top=h;e.height=l-h;vi(yr(e,v))}}}function yu(n){return ei.left(n)}function pu(n){return li.left(n)}function wu(n){return ei.right(n)}function bu(n){return li.right(n)}function gt(n){return l("allDaySlot")&&!n.row}function ni(n){var i=ct(0,n.col),t=n.row;return l("allDaySlot")&&t--,t>=0&&u(i,st+t*vt),i}function ht(n,r){if(n=i(n,!0),r<u(i(n),st))return 0;if(r>=u(i(n),ai))return ft.height();var f=l("slotMinutes"),s=r.getHours()*60+r.getMinutes()-st,e=Math.floor(s/f),o=ir[e];return o===t&&(o=ir[e]=ft.find("tr").eq(e).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+gi*(s%f/f)))}function ku(){return ii}function du(n){var t=i(n.start);return n.allDay?t:u(t,l("defaultEventMinutes"))}function gu(n,t){return t?i(n):u(i(n),l("slotMinutes"))}function nf(n,t,u){u?l("allDaySlot")&&or(n,r(i(t),1),!0):lr(n,t)}function lr(t,i){var f=l("selectHelper"),u,e;if(rt.build(),f){if(u=pr(t).col,u>=0&&u<it){var r=rt.rect(0,u,0,u,v),o=ht(t,t),s=ht(t,i);s>o&&(r.top=o,r.height=s-o,r.left+=2,r.width-=5,n.isFunction(f)?(e=f(t,i),e&&(r.position="absolute",a=n(e).css(r).appendTo(v))):(r.isStart=!0,r.isEnd=!0,a=n(sf({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},r)),a.css("opacity",l("dragOpacity"))),a&&(vi(a),v.append(a),p(a,r.width,!0),kt(a,r.height,!0)))}}else hr(t,i)}function ar(){yi();a&&(a.remove(),a=null)}function tf(t){if(t.which==1&&l("selectable")){ef(t);var r;yt.start(function(n,t){if(ar(),n&&n.col==t.col&&!gt(n)){var f=ni(t),e=ni(n);r=[f,u(i(f),vt),e,u(i(e),vt)].sort(dt);lr(r[0],r[3])}else r=null},t);n(document).one("mouseup",function(n){yt.stop();r&&(+r[0]==+r[1]&&vr(r[0],!1,n),ff(r[0],r[3],!1,n))})}}function vr(n,t,i){ti("dayClick",ut[pr(n).col],n,t,i)}function rf(n,t){yt.start(function(n){if(yi(),n)if(gt(n))sr(n.row,n.col,n.row,n.col);else{var t=ni(n),r=u(i(t),l("defaultEventMinutes"));hr(t,r)}},t)}function uf(n,t,i){var r=yt.stop();yi();r&&ti("drop",n,ni(r),gt(r),t,i)}var c=this;c.renderAgenda=uu;c.setWidth=lu;c.setHeight=cu;c.afterRender=vu;c.defaultEventEnd=du;c.timePosition=ht;c.getIsCellAllDay=gt;c.allDayRow=ku;c.getCoordinateGrid=function(){return rt};c.getHoverListener=function(){return yt};c.colLeft=yu;c.colRight=wu;c.colContentLeft=pu;c.colContentRight=bu;c.getDaySegmentContainer=function(){return ki};c.getSlotSegmentContainer=function(){return dr};c.getMinMinute=function(){return st};c.getMaxMinute=function(){return ai};c.getSlotContainer=function(){return v};c.getRowCnt=function(){return 1};c.getColCnt=function(){return it};c.getColWidth=function(){return ri};c.getSnapHeight=function(){return ui};c.getSnapMinutes=function(){return vt};c.defaultSelectionEnd=gu;c.renderDayOverlay=or;c.renderSelection=nf;c.clearSelection=ar;c.reportDayClick=vr;c.dragStart=rf;c.dragStop=uf;fi.call(c,f,o,h);si.call(c);oi.call(c);cr.call(c);var l=c.opt,ti=c.trigger,yr=c.renderOverlay,yi=c.clearOverlays,ff=c.reportSelection,ef=c.unselect,of=c.daySelectionMousedown,sf=c.slotSegHtml,ct=c.cellToDate,pr=c.dateToCell,hf=c.rangeToSegments,pi=o.formatDate,d,wt,wi,bt,ut,bi,wr,br,kr,nt,ki,lt,ii,y,v,dr,ft,a,cf,gr,at,ri,di,gi,vt,nr,ui,it,tr,rt,yt,ei,li,ir={},et,nu,st,ai,tu,iu,rr,ru;b(f.addClass("fc-agenda"));rt=new hi(function(t,i){function o(n){return Math.max(h,Math.min(c,n))}var u,r,e,f;wi.each(function(t,f){u=n(f);r=u.offset().left;t&&(e[1]=r);e=[r];i[t]=e});e[1]=r+u.outerWidth();l("allDaySlot")&&(u=ii,r=u.offset().top,t[0]=[r,r+u.outerHeight()]);var s=v.offset().top,h=y.offset().top,c=h+y.outerHeight();for(f=0;f<tr*nr;f++)t.push([o(s+ui*f),o(s+ui*(f+1))])});yt=new ci(rt);ei=new g(function(n){return bi.eq(n)});li=new g(function(n){return wr.eq(n)})}function cr(){function at(n,t){for(var f=n.length,r=[],u=[],i=0;i<f;i++)n[i].allDay?r.push(n[i]):u.push(n[i]);o("allDaySlot")&&(wi(r,t),oi());dt(yt(u),t)}function vt(){si().empty();it().empty()}function yt(t){for(var a=et(),c=rt(),v=ci(),f,y=n.map(t,wt),e,s,r,l=[],o=0;o<a;o++)for(f=h(0,o),u(f,c),r=pt(t,y,f,u(i(f),v-c)),r=lr(r),e=0;e<r.length;e++)s=r[e],s.col=o,l.push(s);return l}function pt(n,t,r,u){for(var v=[],y=n.length,s,f,e,h,c,l,a,o=0;o<y;o++)s=n[o],f=s.start,e=t[o],e>r&&f<u&&(f<r?(h=i(r),l=!1):(h=f,l=!0),e>u?(c=i(u),a=!1):(c=e,a=!0),v.push({event:s,start:h,end:c,isStart:l,isEnd:a}));return v.sort(ui)}function wt(n){return n.end?i(n.end):u(i(n.start),o("defaultEventMinutes"))}function dt(i,r){for(var k=i.length,u,h,tt,et,p,a,v,c,l,y,ot="",st,f,b,rt,ft,nt=it(),ct=o("isRTL"),e=0;e<k;e++)u=i[e],h=u.event,tt=ut(u.start,u.start),et=ut(u.start,u.end),p=li(u.col),a=ai(u.col),v=a-p,a-=v*.025,v=a-p,c=v*(u.forwardCoord-u.backwardCoord),o("slotEventOverlap")&&(c=Math.max((c-10)*2,c)),ct?(y=a-u.backwardCoord*v,l=y-c):(l=p+u.backwardCoord*v,y=l+c),l=Math.max(l,p),y=Math.min(y,a),c=y-l,u.top=tt,u.left=l,u.outerWidth=c,u.outerHeight=et-tt,ot+=d(h,u);for(nt[0].innerHTML=ot,st=nt.children(),e=0;e<k;e++)u=i[e],h=u.event,f=n(st[e]),b=s("eventRender",h,h,f),b===!1?f.remove():(b&&b!==!0&&(f.remove(),f=n(b).css({position:"absolute",top:u.top,left:u.left}).appendTo(nt)),u.element=f,h._id===r?g(h,f,u):f[0]._fci=e,yi(h,f));for(bt(nt,i,g),e=0;e<k;e++)u=i[e],(f=u.element)&&(u.vsides=w(f,!0),u.hsides=ht(f,!0),rt=f.find(".fc-event-title"),rt.length&&(u.contentTop=rt[0].offsetTop));for(e=0;e<k;e++)u=i[e],(f=u.element)&&(f[0].style.width=Math.max(0,u.outerWidth-u.hsides)+"px",ft=Math.max(0,u.outerHeight-u.vsides),f[0].style.height=ft+"px",h=u.event,u.contentTop!==t&&ft-u.contentTop<10&&(f.find("div.fc-event-time").text(bi(h.start,o("timeFormat"))+" - "+h.title),f.find("div.fc-event-title").remove()),s("eventAfterRender",h,h,f))}function d(n,t){var r="<",u=n.url,f=ni(n,o),i=["fc-event","fc-event-vert"];return nt(n)&&i.push("fc-event-draggable"),t.isStart&&i.push("fc-event-start"),t.isEnd&&i.push("fc-event-end"),i=i.concat(n.className),n.source&&(i=i.concat(n.source.className||[])),r+=u?"a href='"+e(n.url)+"'":"div",r+=" class='"+i.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+f+"'><div class='fc-event-inner'><div class='fc-event-time'>"+e(k(n.start,n.end,o("timeFormat")))+"<\/div><div class='fc-event-title'>"+e(n.title||"")+"<\/div><\/div><div class='fc-event-bg'><\/div>",t.isEnd&&tt(n)&&(r+="<div class='ui-resizable-handle ui-resizable-s'>=<\/div>"),r+("<\/"+(u?"a":"div")+">")}function g(n,t,i){var r=t.find("div.fc-event-time");nt(n)&&ti(n,t,r);i.isEnd&&tt(n)&&ii(n,t,r);fi(n,t)}function gt(n,t,u){function k(){e||(t.width(d).height("").draggable("option","grid",null),e=!0)}var ut=u.isStart,d,f,e=!0,w,g=hi(),nt=ot(),tt=l(),it=a(),ft=rt();t.draggable({opacity:o("dragOpacity","month"),revertDuration:o("dragRevertDuration"),start:function(u,l){s("eventDragStart",t,n,u,l);b(n,t);d=t.width();g.start(function(u,s){if(c(),u){f=!1;var l=h(0,s.col),a=h(0,u.col);w=v(a,l);u.row?ut?e&&(t.width(nt-10),kt(t,tt*Math.round((n.end?(n.end-n.start)/iu:o("defaultEventMinutes"))/it)),t.draggable("option","grid",[nt,1]),e=!1):f=!0:(ct(r(i(n.start),w),r(y(n),w)),k());f=f||e&&!w}else k(),f=!0;t.draggable("option","revert",f)},u,"drag")},stop:function(i,r){if(g.stop(),c(),s("eventDragStop",t,n,i,r),f)k(),t.css("filter",""),p(n,t);else{var u=0;e||(u=Math.round((t.offset().top-vi().offset().top)/tt)*it+ft-(n.start.getHours()*60+n.start.getMinutes()));st(this,n,w,u,e,i,r)}}})}function ti(n,t,e){function wt(){c();d&&(w?(e.hide(),t.draggable("option","grid",null),ct(r(i(n.start),tt),r(y(n),tt))):(kt(g),e.css("display",""),t.draggable("option","grid",[lt,at])))}function kt(t){var f=u(i(n.start),t),r;n.end&&(r=u(i(n.end),t));e.text(k(f,r,o("timeFormat")))}var ht=f.getCoordinateGrid(),bt=et(),lt=ot(),at=l(),dt=a(),it,rt,d,vt,w,yt,nt,ut,tt,g,pt;t.draggable({scroll:!1,grid:[lt,at],axis:bt==1?"y":!1,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(i,r){s("eventDragStart",t,n,i,r);b(n,t);ht.build();it=t.position();rt=ht.cell(i.pageX,i.pageY);d=vt=!0;w=yt=ft(rt);nt=ut=0;tt=0;g=pt=0},drag:function(n,i){var u=ht.cell(n.pageX,n.pageY),f,r,e;d=!!u;d&&(w=ft(u),nt=Math.round((i.position.left-it.left)/lt),nt!=ut&&(f=h(0,rt.col),r=rt.col+nt,r=Math.max(0,r),r=Math.min(bt-1,r),e=h(0,r),tt=v(e,f)),w||(g=Math.round((i.position.top-it.top)/at)*dt));(d!=vt||w!=yt||nt!=ut||g!=pt)&&(wt(),vt=d,yt=w,ut=nt,pt=g);t.draggable("option","revert",!d)},stop:function(i,r){c();s("eventDragStop",t,n,i,r);d&&(w||tt||g)?st(this,n,tt,w?0:g,w,i,r):(d=!0,w=!1,nt=0,tt=0,g=0,wt(),t.css("filter",""),t.css(it),p(n,t))}})}function ii(n,t,i){var r,f,e=l(),h=a();t.resizable({handles:{s:".ui-resizable-handle"},grid:e,start:function(i,u){r=f=0;b(n,t);s("eventResizeStart",this,n,i,u)},resize:function(s,c){r=Math.round((Math.max(e,t.height())-c.originalSize.height)/e);r!=f&&(i.text(k(n.start,!r&&!n.end?null:u(ri(n),h*r),o("timeFormat"))),f=r)},stop:function(i,u){s("eventResizeStop",this,n,i,u);r?pi(this,n,0,h*r,i,u):p(n,t)}})}var f=this;f.renderEvents=at;f.clearEvents=vt;f.slotSegHtml=d;ei.call(f);var o=f.opt,s=f.trigger,nt=f.isEventDraggable,tt=f.isEventResizable,ri=f.eventEnd,fi=f.eventElementHandlers,oi=f.setHeight,si=f.getDaySegmentContainer,it=f.getSlotSegmentContainer,hi=f.getHoverListener,ci=f.getMaxMinute,rt=f.getMinMinute,ut=f.timePosition,ft=f.getIsCellAllDay,li=f.colContentLeft,ai=f.colContentRight,h=f.cellToDate,et=f.getColCnt,ot=f.getColWidth,l=f.getSnapHeight,a=f.getSnapMinutes,vi=f.getSlotContainer,yi=f.reportEventElement,p=f.showEvents,b=f.hideEvents,st=f.eventDrop,pi=f.eventResize,ct=f.renderDayOverlay,c=f.clearOverlays,wi=f.renderDayEvents,lt=f.calendar,bi=lt.formatDate,k=lt.formatDates;f.draggableDayEvent=gt}function lr(n){var r=ar(n),i=r[0],t;if(vr(r),i){for(t=0;t<i.length;t++)ii(i[t]);for(t=0;t<i.length;t++)at(i[t],0,0)}return yr(r)}function ar(n){for(var i=[],r,t,u=0;u<n.length;u++){for(r=n[u],t=0;t<i.length;t++)if(!ri(r,i[t]).length)break;(i[t]||(i[t]=[])).push(r)}return i}function vr(n){for(var f,t,i,r,u=0;u<n.length;u++)for(f=n[u],t=0;t<f.length;t++)for(i=f[t],i.forwardSegs=[],r=u+1;r<n.length;r++)ri(i,n[r],i.forwardSegs)}function ii(n){var f=n.forwardSegs,r=0,i,u;if(n.forwardPressure===t){for(i=0;i<f.length;i++)u=f[i],ii(u),r=Math.max(r,1+u.forwardPressure);n.forwardPressure=r}}function at(n,i,r){var u=n.forwardSegs,f;if(n.forwardCoord===t)for(u.length?(u.sort(wr),at(u[0],i+1,r),n.forwardCoord=u[0].backwardCoord):n.forwardCoord=1,n.backwardCoord=n.forwardCoord-(n.forwardCoord-r)/(i+1),f=0;f<u.length;f++)at(u[f],0,n.forwardCoord)}function yr(n){for(var u=[],i,t,r=0;r<n.length;r++)for(i=n[r],t=0;t<i.length;t++)u.push(i[t]);return u}function ri(n,t,i){i=i||[];for(var r=0;r<t.length;r++)pr(n,t[r])&&i.push(t[r]);return i}function pr(n,t){return n.end>t.start&&n.start<t.end}function wr(n,t){return t.forwardPressure-n.forwardPressure||(n.backwardCoord||0)-(t.backwardCoord||0)||ui(n,t)}function ui(n,t){return n.start-t.start||t.end-t.start-(n.end-n.start)||(n.event.title||"").localeCompare(t.event.title)}function fi(f,e,o){function h(t,i){var r=ut[t];return n.isPlainObject(r)?ct(r,i||o):r}function y(n,t){return e.trigger.apply(e,[n,t||s].concat(Array.prototype.slice.call(arguments,2),[s]))}function pt(n){var t=n.source||{};return a(n.startEditable,t.startEditable,h("eventStartEditable"),n.editable,t.editable,h("editable"))&&!h("disableDragging")}function wt(n){var t=n.source||{};return a(n.durationEditable,t.durationEditable,h("eventDurationEditable"),n.editable,t.editable,h("editable"))&&!h("disableResizing")}function bt(n){c={};for(var r=n.length,t,i=0;i<r;i++)t=n[i],c[t._id]?c[t._id].push(t):c[t._id]=[t]}function kt(){c={};p={};rt=[]}function ft(n){return n.end?i(n.end):li(n)}function dt(n,t){rt.push({event:n,element:t});p[n._id]?p[n._id].push(t):p[n._id]=[t]}function gt(){n.each(rt,function(n,t){s.trigger("eventDestroy",t.event,t.event,t.element)})}function ni(n,t){t.click(function(i){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return y("eventClick",this,n,i)}).hover(function(t){y("eventMouseover",this,n,t)},function(t){y("eventMouseout",this,n,t)})}function ti(n,t){et(n,t,"show")}function ii(n,t){et(n,t,"hide")}function et(n,t,i){for(var u=p[n._id],f=u.length,r=0;r<f;r++)t&&u[r][0]==t[0]||u[r][i]()}function ri(n,t,i,r,u,f,e){var s=t.allDay,o=t._id;ot(c[o],i,r,u);y("eventDrop",n,t,i,r,u,function(){ot(c[o],-i,-r,s);g(o)},f,e);g(o)}function ui(n,t,i,r,u,f){var e=t._id;st(c[e],i,r);y("eventResize",n,t,i,r,function(){st(c[e],-i,-r);g(e)},u,f);g(e)}function ot(n,i,f,e){f=f||0;for(var o,h=n.length,s=0;s<h;s++)o=n[s],e!==t&&(o.allDay=e),u(r(o.start,i,!0),f),o.end&&(o.end=u(r(o.end,i,!0),f)),at(o,ut)}function st(n,t,i){i=i||0;for(var f,o=n.length,e=0;e<o;e++)f=n[e],f.end=u(r(ft(f),t,!0),i),at(f,ut)}function fi(n){return typeof n=="object"&&(n=n.getDay()),nt[n]}function ei(){return l}function oi(n,t,i){for(t=t||1;nt[(n.getDay()+(i?t:0)+7)%7];)r(n,t)}function si(){var n=ht.apply(null,arguments),t=w(n);return lt(t)}function ht(n,t){var i=s.getColCnt(),r=it?-1:1,u=it?i-1:0;return typeof n=="object"&&(t=n.col,n=n.row),n*i+(t*r+u)}function w(n){var t=s.visStart.getDay();return n+=tt[t],Math.floor(n/l)*7+yt[(n%l+l)%l]-t}function lt(n){var t=i(s.visStart);return r(t,n),t}function hi(n){var t=b(n),i=k(t);return d(i)}function b(n){return v(n,s.visStart)}function k(n){var t=s.visStart.getDay();return n+=t,Math.floor(n/7)*l+tt[(n%7+7)%7]-tt[t]}function d(n){var t=s.getColCnt(),i=it?-1:1,r=it?t-1:0,u=Math.floor(n/t),f=(n%t+t)%t*i+r;return{row:u,col:f}}function ci(n,t){for(var a=s.getRowCnt(),f=s.getColCnt(),e=[],o=b(n),h=b(t),v=k(o),y=k(h)-1,i=0;i<a;i++){var c=i*f,p=c+f-1,r=Math.max(v,c),u=Math.min(y,p);if(r<=u){var g=d(r),nt=d(u),l=[g.col,nt.col].sort(),tt=w(r)==o,it=w(u)+1==h;e.push({row:i,leftCol:l[0],rightCol:l[1],isStart:tt,isEnd:it})}}return e}var s=this;s.element=f;s.calendar=e;s.name=o;s.opt=h;s.trigger=y;s.isEventDraggable=pt;s.isEventResizable=wt;s.setEventData=bt;s.clearEventData=kt;s.eventEnd=ft;s.reportEventElement=dt;s.triggerEventDestroy=gt;s.eventElementHandlers=ni;s.showEvents=ti;s.hideEvents=ii;s.eventDrop=ri;s.eventResize=ui;s.getShownEvents=function(){var n=[];for(id in p)n=n.concat(c[id]);return n};var li=s.defaultEventEnd,at=e.normalizeEvent,g=e.reportEventChange,c={},p={},rt=[],ut=e.options;s.isHiddenDay=fi;s.skipHiddenDays=oi;s.getCellsPerWeek=ei;s.dateToCell=hi;s.dateToDayOffset=b;s.dayOffsetToCellOffset=k;s.cellOffsetToCell=d;s.cellToDate=si;s.cellToCellOffset=ht;s.cellOffsetToDayOffset=w;s.dayOffsetToDate=lt;s.rangeToSegments=ci;var vt=h("hiddenDays")||[],nt=[],l,tt=[],yt=[],it=h("isRTL");(function(){h("weekends")===!1&&vt.push(0,6);for(var t=0,i=0;t<7;t++)tt[t]=i,nt[t]=n.inArray(t,vt)!=-1,nt[t]||(yt[i]=t,i++);if(l=i,!l)throw"invalid hiddenDays";})()}function ei(){function ft(n,t){var i=c(n,!1,!0);o(i,function(n,t){ei(n.event,t)});ii(i,t);o(i,function(n,t){f("eventAfterRender",n.event,n.event,t)})}function et(n,t,i){var u=c([n],!0,!1),r=[];return o(u,function(n,u){n.row===t&&u.css("top",i);r.push(u[0])}),r}function c(t,i,r){var e=g(),s=i?n("<div/>"):e,u=ot(t),h,f;return ct(u),h=lt(u),s[0].innerHTML=h,f=s.children(),i&&e.append(f),vt(u,f),o(u,function(n,t){n.hsides=ht(t,!0)}),o(u,function(n,t){t.width(Math.max(0,n.outerWidth-n.hsides))}),o(u,function(n,t){n.outerHeight=t.outerHeight(!0)}),yt(u,r),u}function ot(n){for(var r,t=[],i=0;i<n.length;i++)r=st(n[i]),t.push.apply(t,r);return t}function st(n){for(var r=n.start,u=y(n),t=bi(r,u),i=0;i<t.length;i++)t[i].event=n;return t}function ct(n){for(var r=u("isRTL"),i=0;i<n.length;i++){var t=n[i],e=(r?t.isEnd:t.isStart)?vi:li,o=(r?t.isStart:t.isEnd)?yi:ai,f=e(t.leftCol),s=o(t.rightCol);t.left=f;t.outerWidth=s-f}}function lt(n){for(var i="",t=0;t<n.length;t++)i+=at(n[t]);return i}function at(n){var r="",s=u("isRTL"),t=n.event,f=t.url,i=["fc-event","fc-event-hori"],o;return a(t)&&i.push("fc-event-draggable"),n.isStart&&i.push("fc-event-start"),n.isEnd&&i.push("fc-event-end"),i=i.concat(t.className),t.source&&(i=i.concat(t.source.className||[])),o=ni(t,u),r+=f?"<a href='"+e(f)+"'":"<div",r+=" class='"+i.join(" ")+"' style='position:absolute;left:"+n.left+"px;"+o+"'><div class='fc-event-inner'>",!t.allDay&&n.isStart&&(r+="<span class='fc-event-time'>"+e(pi(t.start,t.end,u("timeFormat")))+"<\/span>"),r+="<span class='fc-event-title'>"+e(t.title||"")+"<\/span><\/div>",n.isEnd&&p(t)&&(r+="<div class='ui-resizable-handle ui-resizable-"+(s?"w":"e")+"'>&nbsp;&nbsp;&nbsp;<\/div>"),r+("<\/"+(f?"a":"div")+">")}function vt(t,i){for(var u=0;u<t.length;u++){var o=t[u],s=o.event,e=i.eq(u),r=f("eventRender",s,s,e);r===!1?e.remove():(r&&r!==!0&&(r=n(r).css({position:"absolute",left:o.left}),e.replaceWith(r),e=r),o.element=e)}}function yt(n,t){var f=pt(n),r=ti(),u=[],i;if(t)for(i=0;i<r.length;i++)r[i].height(f[i]);for(i=0;i<r.length;i++)u.push(r[i].position().top);o(n,function(n,t){t.css("top",u[n.row]+n.top)})}function pt(n){for(var f,r,u,t,i,h=s(),c=d(),o=[],l=wt(n),e=0;e<h;e++){for(f=l[e],r=[],i=0;i<c;i++)r.push(0);for(u=0;u<f.length;u++)for(t=f[u],t.top=gt(r.slice(t.leftCol,t.rightCol+1)),i=t.leftCol;i<=t.rightCol;i++)r[i]=t.top+t.outerHeight;o.push(gt(r))}return o}function wt(n){for(var f=s(),i=[],r,t,u=0;u<n.length;u++)r=n[u],t=r.row,r.element&&(i[t]?i[t].push(r):i[t]=[r]);for(t=0;t<f;t++)i[t]=kt(i[t]||[]);return i}function kt(n){for(var t=[],r=dt(n),i=0;i<r.length;i++)t.push.apply(t,r[i]);return t}function dt(n){var t,r,u,i;for(n.sort(kr),t=[],r=0;r<n.length;r++){for(u=n[r],i=0;i<t.length;i++)if(!br(u,t[i]))break;t[i]?t[i].push(u):t[i]=[u]}return t}function ti(){for(var i=s(),t=[],n=0;n<i;n++)t[n]=ci(n).find("div.fc-day-content > div");return t}function ii(n,t){var i=g();o(n,function(n,i,r){var u=n.event;u._id===t?l(u,i,n):i[0]._fci=r});bt(i,n,l)}function l(n,i,r){a(n)&&t.draggableDayEvent(n,i,r);r.isEnd&&p(n)&&t.resizableDayEvent(n,i,r);oi(n,i)}function ri(n,t){var o=tt(),e;t.draggable({delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(u,s){f("eventDragStart",t,n,u,s);k(n,t);o.start(function(u,f,o,s){if(t.draggable("option","revert",!u||!o&&!s),h(),u){var c=it(f),l=it(u);e=v(l,c);nt(r(i(n.start),e),r(y(n),e))}else e=0},u,"drag")},stop:function(i,r){o.stop();h();f("eventDragStop",t,n,i,r);e?si(this,n,e,0,n.allDay,i,r):(t.css("filter",""),w(n,t))}})}function ui(t,i,e){var l=u("isRTL"),o=l?"w":"e",a=i.find(".ui-resizable-"+o),c=!1;b(i);i.mousedown(function(n){n.preventDefault()}).click(function(n){c&&(n.preventDefault(),n.stopImmediatePropagation())});a.mousedown(function(u){function b(i){f("eventResizeStop",this,t,i);n("body").css("cursor","");v.stop();h();a&&hi(this,t,a,0,i);setTimeout(function(){c=!1},0)}if(u.which==1){c=!0;var v=tt(),ft=s(),ot=d(),g=i.css("top"),a,l,p=n.extend({},t),it=di(ki(t.start));wi();n("body").css("cursor",o+"-resize").one("mouseup",b);f("eventResizeStart",this,t,u);v.start(function(i,u){var c,f,s;i&&(c=rt(u),f=rt(i),f=Math.max(f,it),a=ut(f)-ut(c),a?(p.end=r(fi(t),a,!0),s=l,l=et(p,e.row,g),l=n(l),l.find("*").css("cursor",o+"-resize"),s&&s.remove(),k(t)):l&&(w(t),l.remove(),l=null),h(),nt(t.start,r(y(t),a)))},u)}})}var t=this;t.renderDayEvents=ft;t.draggableDayEvent=ri;t.resizableDayEvent=ui;var u=t.opt,f=t.trigger,a=t.isEventDraggable,p=t.isEventResizable,fi=t.eventEnd,ei=t.reportEventElement,oi=t.eventElementHandlers,w=t.showEvents,k=t.hideEvents,si=t.eventDrop,hi=t.eventResize,s=t.getRowCnt,d=t.getColCnt,gi=t.getColWidth,ci=t.allDayRow,li=t.colLeft,ai=t.colRight,vi=t.colContentLeft,yi=t.colContentRight,nr=t.dateToCell,g=t.getDaySegmentContainer,pi=t.calendar.formatDates,nt=t.renderDayOverlay,h=t.clearOverlays,wi=t.clearSelection,tt=t.getHoverListener,bi=t.rangeToSegments,it=t.cellToDate,rt=t.cellToCellOffset,ut=t.cellOffsetToDayOffset,ki=t.dateToDayOffset,di=t.dayOffsetToCellOffset}function br(n,t){for(var i,r=0;r<t.length;r++)if(i=t[r],i.leftCol<=n.rightCol&&i.rightCol>=n.leftCol)return!0;return!1}function o(n,t){for(var r,u,i=0;i<n.length;i++)r=n[i],u=r.element,u&&t(r,u,i)}function kr(n,t){return t.rightCol-t.leftCol-(n.rightCol-n.leftCol)||t.event.allDay-n.event.allDay||n.event.start-t.event.start||(n.event.title||"").localeCompare(t.event.title)}function oi(){function h(n,t,r){i();t||(t=l(n,r));o(n,t,r);u(n,t,r)}function i(n){f&&(f=!1,s(),e("unselect",null,n))}function u(n,t,i,r){f=!0;e("select",null,n,t,i,r)}function c(f){var h=t.cellToDate,l=t.getIsCellAllDay,c=t.getHoverListener(),a=t.reportDayClick,v,e;if(f.which==1&&r("selectable")){i(f);v=this;c.start(function(n,t){s();n&&l(n)?(e=[h(t),h(n)].sort(dt),o(e[0],e[1],!0)):e=null},f);n(document).one("mouseup",function(n){c.stop();e&&(+e[0]==+e[1]&&a(e[0],!0,n),u(e[0],e[1],!0,n))})}}var t=this;t.select=h;t.unselect=i;t.reportSelection=u;t.daySelectionMousedown=c;var r=t.opt,e=t.trigger,l=t.defaultSelectionEnd,o=t.renderSelection,s=t.clearSelection,f=!1;r("selectable")&&r("unselectAuto")&&n(document).mousedown(function(t){var u=r("unselectCancel");u&&n(t.target).parents(u).length||i(t)})}function si(){function u(r,u){var f=i.shift();return f||(f=n("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),f[0].parentNode!=u[0]&&f.appendTo(u),t.push(f.css(r).show()),f}function f(){for(var n;n=t.shift();)i.push(n.hide().unbind())}var r=this,t,i;r.renderOverlay=u;r.clearOverlays=f;t=[];i=[]}function hi(n){var r=this,t,i;r.build=function(){t=[];i=[];n(t,i)};r.cell=function(n,r){for(var o=t.length,s=i.length,f=-1,e=-1,u=0;u<o;u++)if(r>=t[u][0]&&r<t[u][1]){f=u;break}for(u=0;u<s;u++)if(n>=i[u][0]&&n<i[u][1]){e=u;break}return f>=0&&e>=0?{row:f,col:e}:null};r.rect=function(n,r,u,f,e){var o=e.offset();return{top:t[n][0]-o.top,left:i[r][0]-o.left,width:i[f][1]-i[r][0],height:t[u][1]-t[n][0]}}}function ci(t){function u(n){dr(n);var u=t.cell(n.pageX,n.pageY);(!u!=!r||u&&(u.row!=r.row||u.col!=r.col))&&(u?(i||(i=u),e(u,i,u.row-i.row,u.col-i.col)):e(u,i),r=u)}var o=this,f,e,i,r;o.start=function(o,s,h){e=o;i=r=null;t.build();u(s);f=h||"mousemove";n(document).bind(f,u)};o.stop=function(){return n(document).unbind(f,u),r}}function dr(n){n.pageX===t&&(n.pageX=n.originalEvent.pageX,n.pageY=n.originalEvent.pageY)}function g(n){function e(t){return f[t]=f[t]||n(t)}var i=this,f={},r={},u={};i.left=function(n){return r[n]=r[n]===t?e(n).position().left:r[n]};i.right=function(n){return u[n]=u[n]===t?i.left(n)+e(n).width():u[n]};i.clear=function(){f={};r={};u={}}}var nt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;<\/span>",next:"<span class='fc-text-arrow'>&rsaquo;<\/span>",prevYear:"<span class='fc-text-arrow'>&laquo;<\/span>",nextYear:"<span class='fc-text-arrow'>&raquo;<\/span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},gr={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;<\/span>",next:"<span class='fc-text-arrow'>&lsaquo;<\/span>",prevYear:"<span class='fc-text-arrow'>&raquo;<\/span>",nextYear:"<span class='fc-text-arrow'>&laquo;<\/span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},f=n.fullCalendar={version:"1.6.4"},h=f.views={},li,ai,vt;n.fn.fullCalendar=function(i){var f,r,u;return typeof i=="string"?(f=Array.prototype.slice.call(arguments,1),this.each(function(){var u=n.data(this,"fullCalendar"),e;u&&n.isFunction(u[i])&&(e=u[i].apply(u,f),r===t&&(r=e),i=="destroy"&&n.removeData(this,"fullCalendar"))}),r!==t)?r:this:(i=i||{},u=i.eventSources||[],delete i.eventSources,i.events&&(u.push(i.events),delete i.events),i=n.extend(!0,{},nt,i.isRTL||i.isRTL===t&&nt.isRTL?gr:{},i),this.each(function(t,r){var f=n(r),e=new vi(f,i,u);f.data("fullCalendar",e);e.render()}),this)};f.sourceNormalizers=[];f.sourceFetchers=[];li={dataType:"json",cache:!1};ai=1;f.addDays=r;f.cloneDate=i;f.parseDate=ft;f.parseISO8601=et;f.parseTime=ot;f.formatDate=c;f.formatDates=st;var tt=["sun","mon","tue","wed","thu","fri","sat"],nu=864e5,tu=36e5,iu=6e4;vt={s:function(n){return n.getSeconds()},ss:function(n){return l(n.getSeconds())},m:function(n){return n.getMinutes()},mm:function(n){return l(n.getMinutes())},h:function(n){return n.getHours()%12||12},hh:function(n){return l(n.getHours()%12||12)},H:function(n){return n.getHours()},HH:function(n){return l(n.getHours())},d:function(n){return n.getDate()},dd:function(n){return l(n.getDate())},ddd:function(n,t){return t.dayNamesShort[n.getDay()]},dddd:function(n,t){return t.dayNames[n.getDay()]},M:function(n){return n.getMonth()+1},MM:function(n){return l(n.getMonth()+1)},MMM:function(n,t){return t.monthNamesShort[n.getMonth()]},MMMM:function(n,t){return t.monthNames[n.getMonth()]},yy:function(n){return(n.getFullYear()+"").substring(2)},yyyy:function(n){return n.getFullYear()},t:function(n){return n.getHours()<12?"a":"p"},tt:function(n){return n.getHours()<12?"am":"pm"},T:function(n){return n.getHours()<12?"A":"P"},TT:function(n){return n.getHours()<12?"AM":"PM"},u:function(n){return c(n,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(n){var t=n.getDate();return t>10&&t<20?"th":["st","nd","rd"][t%10-1]||"th"},w:function(n,t){return t.weekNumberCalculation(n)},W:function(n){return wi(n)}};f.dateFormatters=vt;f.applyAll=d;h.month=ur;h.basicWeek=fr;h.basicDay=er;yt({weekMode:"fixed"});h.agendaWeek=sr;h.agendaDay=hr;yt({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r};String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1},function(n){var u="month",f="agendaWeek",i="agendaDay",a="basicWeek",t="keypress",e=function(n){return n.protocol.length===0&&(n.protocol=(new Url).protocol),n},h=function(n){var c=function(n){var t=$(document.createElement("span"));return t.html(n),t.attr("role","button"),t.attr("tabindex","0"),t},l=function(n){return n.endsWith("/")||(n=n+"/"),n+"Semester/"},a=$(document),h=$(document.createElement("div")),f=c("semester <u>1<\/u>"),i,o,r,u,s;f.attr("class","fc-button fc-button-wide fc-state-default fc-corner-left");n.shortName==="1"?f.addClass("fc-state-active"):(i=new Url(n.interactiveLocation),i=e(i),i.path=l(i.path)+"1/",o=function(){window.location.href=i.toString()},f.click(o),f.keydown(function(n){(n.keyCode==13||n.keyCode==32)&&o()}),a.bind(t,"1",o));r=c("semester <u>2<\/u>");r.attr("class","fc-button fc-button-wide fc-state-default fc-corner-right");n.shortName==="2"?r.addClass("fc-state-active"):(u=new Url(n.interactiveLocation),u=e(u),u.path=l(u.path)+"2/",s=function(){window.location.href=u.toString()},r.click(s),r.keydown(function(n){(n.keyCode==13||n.keyCode==32)&&s()}),a.bind(t,"2",s));h.prepend(r);h.prepend(f);$("td.fc-header-right").prepend(h)},v=function(){function n(n){var e=this;this.config=n;this.TableBody=function(){return $("#"+e.settings.TableId+">table>tbody")};this.Source=function(n,t,i){e.FirstCall?i(e.ReadFromTable()):$.ajax({cache:!0,url:"/api/Timetable/"+e.settings.Entity+"/"+e.settings.Identifier,dataType:"json",data:{start:Math.round(n.getTime()/1e3),end:Math.round(t.getTime()/1e3)},success:i})};this.ReadFromTable=function(){var n=[],t=function(t,i){var u=$(i),f;u.attr("data-rows")!=="no"&&(f=r.FromRow(u),n.push(f))};return e.TableBody().children().each(t),n};this.WriteToTable=function(){if(e.FirstCall){e.FirstCall=!1;return}var t=function(n,t){var i=r.ToRow(t);e.TableBody().append(i)},n=e.Calendar.fullCalendar("getView").getShownEvents();n.sort(function(n,t){return n.start>t.start?1:n.start<t.start?-1:0});e.TableBody().empty();n.length>0?$.each(n,t):e.TableBody().append("<tr data-rows='no'><td colspan='6' class='no-events text-center'>There are no events scheduled for the specified time period.<\/td><\/tr>")};this.EventRender=function(n,t,i){i.name!==u&&n.locations&&t.children(".fc-event-inner").append("<div class='fc-event-location'>"+n.locations+"<\/div>");n.isDraft&&t.children(".fc-event-inner").addClass("is-draft")};this.EventClick=function(n){$.get("/Event/Modal/"+n.id+"/?start="+moment(n.start).format("X")+"&finish="+moment(n.end).format("X")+"&isDraft="+n.isDraft,function(n){$(n).appendTo("body").modal()})};this.EventSelect=function(n){e.Calendar.fullCalendar("getView").name!==i&&(e.Calendar.fullCalendar("gotoDate",n),e.Calendar.fullCalendar("changeView",i));e.Calendar.fullCalendar("unselect")};this.WeekNumberCalculation=function(n){var t=e.settings.StartingWeekNumber,i=moment(e.settings.YearStartDate),r=moment(n),u=r.diff(i,"weeks");return t+u};this.SetUpCalendar=function(){$("#"+e.settings.TableId).addClass("hidden-medium hidden-large hidden-extra-large");e.Calendar=$("#"+e.settings.CalendarId).empty().fullCalendar({year:e.settings.RequestedDate.getFullYear(),month:e.settings.RequestedDate.getMonth(),date:e.settings.RequestedDate.getDate(),buttonText:{today:"<u>t<\/u>oday",month:"<u>m<\/u>onth",week:"<u>w<\/u>eek",day:"<u>d<\/u>ay"},header:{left:"prev,next today",center:"title",right:u+","+f+","+i},columnFormat:{month:"ddd",week:"ddd dS MMM",day:""},timeFormat:{month:"h(:mm)tt"},contentHeight:650,defaultView:e.settings.DefaultView,weekMode:"variable",weekends:e.settings.Weekends,weekNumbers:!0,weekNumberCalculation:e.WeekNumberCalculation,allDaySlot:!1,firstDay:1,minTime:e.settings.MinTime,maxTime:e.settings.MaxTime,editable:!1,events:e.Source,eventRender:e.EventRender,eventAfterAllRender:e.WriteToTable,eventClick:e.EventClick,selectable:!0,select:e.EventSelect});h(e.settings)};this.BindKeyBindings=function(){var n=$(document),r=function(){$("#"+e.settings.CalendarId).fullCalendar("prev")},o=function(){$("#"+e.settings.CalendarId).fullCalendar("next")};n.bind(t,"left",r);e.Calendar.on("swiperight",r);n.bind(t,"right",o);e.Calendar.on("swipeleft",o);n.bind(t,"t",function(){$("#"+e.settings.CalendarId).fullCalendar("today")});n.bind(t,"m",function(){$("#"+e.settings.CalendarId).fullCalendar("changeView",u)});n.bind(t,"w",function(){$("#"+e.settings.CalendarId).fullCalendar("changeView",f)});n.bind(t,"d",function(){$("#"+e.settings.CalendarId).fullCalendar("changeView",i)})};this.settings=n;this.FirstCall=!0;this.settings.DefaultView=new Url(window.location.href).query.view||f}return n}(),c,r,o,s,l;n.CalendarSetup=v;c=function(){function n(n){var r=this;this.config=n;this.TableBody=function(){return $("#"+r.settings.TableId+">table>tbody")};this.Source=function(n,t,i){i(r.ReadFromTable())};this.ReadFromTable=function(){var n=[],t=function(t,i){var r=$(i),u;r.attr("data-rows")!=="no"&&(u=o.FromRow(r),n.push(u))};return r.TableBody().children().each(t),n};this.EventRender=function(n,t,i){i.name!==u&&(n.location&&t.children(".fc-event-inner").append("<div class='fc-event-location'>"+n.location+"<\/div>"),n.pattern&&t.children(".fc-event-inner").append("<div class='fc-event-pattern'>"+n.pattern+"<\/div>"));n.isDraft&&t.children(".fc-event-inner").addClass("is-draft")};this.EventClick=function(n){$.get("/Event/Modal/"+n.id+"/?IsDraft="+n.isDraft,function(n){$(n).appendTo("body").modal()})};this.EventSelect=function(n){r.Calendar.fullCalendar("getView").name!==i&&(r.Calendar.fullCalendar("gotoDate",n),r.Calendar.fullCalendar("changeView",i));r.Calendar.fullCalendar("unselect")};this.GotoInteractive=function(n){var t=new Url(r.settings.interactiveLocation);t=e(t);t.query.view=n;window.location.href=t.toString()};this.BindKeyBindings=function(){var n=$(document);n.bind(t,"m",function(){r.GotoInteractive(u)});n.bind(t,"w",function(){r.GotoInteractive(f)});n.bind(t,"d",function(){r.GotoInteractive(i)})};this.SetUpCalendar=function(){$("#"+r.settings.TableId).addClass("hidden-medium hidden-large hidden-extra-large");r.Calendar=$("#"+r.settings.CalendarId).empty().fullCalendar({year:1900,month:0,date:1,header:{left:"",center:"title",right:""},columnFormat:{week:"ddd"},timeFormat:{basicWeek:"h(:mm)tt"},titleFormat:{week:"'"+r.settings.title+"'"},contentHeight:900,defaultView:a,weekMode:"variable",weekends:r.settings.Weekends,weekNumbers:!1,allDaySlot:!1,slotMinutes:20,firstDay:1,minTime:r.settings.MinTime,maxTime:r.settings.MaxTime,editable:!1,events:r.Source,eventRender:r.EventRender,eventClick:r.EventClick,selectable:!0,select:function(){}});h(r.settings);r.AddMonthWeekDayLinks()};this.AddMonthWeekDayLinks=function(){var u=$(document.createElement("span")),n,t,f;u.html("<u>m<\/u>onth");u.attr("class","fc-button fc-state-default fc-corner-left");u.on("click",function(){r.GotoInteractive("month")});n=$(document.createElement("span"));n.html("<u>w<\/u>eek");n.attr("class","fc-button fc-state-default");n.on("click",function(){r.GotoInteractive("agendaWeek")});t=$(document.createElement("span"));t.html("<u>d<\/u>ay");t.attr("class","fc-button fc-state-default fc-corner-right");t.on("click",function(){r.GotoInteractive(i)});f=$("td.fc-header-right");f.append(u);f.append(n);f.append(t)};this.settings=n;this.FirstCall=!0}return n}();n.SemesterCalendarSetup=c;r=function(){function n(){}return n.FromRow=function(t){var i=new n;return i.id=n.idReg.exec(t.children("td:nth-child(1)").children("a").attr("href"))[1],i.code=t.children("td:nth-child(1)").children("a").text(),i.title=t.children("td:nth-child(2)").text(),i.className=t.children("td:nth-child(3)").text(),i.start=moment(t.children("td:nth-child(4)").text(),"DD/MM/YYYY hh:mm").toDate(),i.end=moment(t.children("td:nth-child(5)").text(),"DD/MM/YYYY hh:mm").toDate(),i.allDay=!1,i.locations=t.children("td:nth-child(6)").text(),i.isDraft=t.hasClass("draft"),i},n.ToRow=function(n){var t=function(n){return moment(n).format("DD/MM/YYYY HH:mm")},i=function(n){return 621355968000000000+n.getTime()*1e4};return(n.isDraft?"<tr class='draft'>":"<tr>")+'<td class="hide-on-paper"><a href="/Event/Index/'+n.id+"?start="+i(n.start)+"&finish="+i(n.end)+"&isDraft="+n.isDraft+'">'+(n.code.toString()||"")+"<\/a><\/td><td>"+n.title+"<\/td><td>"+(n.className.toString()||"&nbsp;")+"<\/td><td>"+t(n.start)+"<\/td><td>"+t(n.end)+"<\/td><td>"+(n.locations.toString()||"&nbsp;")+"<\/td><\/tr>"},n.idReg=new RegExp("(\\w*?)(?=\\?)"),n}();n.CalendarEvent=r;o=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.FromRow=function(n){var i=new t;return i.id=r.idReg.exec(n.children("td:nth-child(1)").children("a").attr("href"))[1],i.code=n.children("td:nth-child(1)").children("a").text(),i.title=n.children("td:nth-child(2)").text(),i.className=n.children("td:nth-child(3)").text(),i.start=moment(n.find("td:nth-child(5) span").text(),"DD/MM/YYYY hh:mm").toDate(),i.end=moment(n.find("td:nth-child(6) span").text(),"DD/MM/YYYY hh:mm").toDate(),i.allDay=!1,i.pattern=n.children("td:nth-child(7)").text(),i.locations=n.children("td:nth-child(8)").text(),i.isDraft=n.hasClass("draft"),i},t}(r);n.SemesterCalendarEvent=o;s=function(){function n(){}return n}();n.CalendarSetupSettings=s;l=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(s);n.SemesterSetupSettings=l}(UoS||(UoS={}));Url=function(){"use strict";var n={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},t={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},i=function(i,r){var e=document,c=e.createElement("a"),r=r||e.location.href,l=r.match(/\/\/(.*?)(?::(.*?))?@/)||[],f;c.href=r;for(f in n)i[f]=c[n[f]]||"";if(i.protocol=i.protocol.replace(/:$/,""),i.query=i.query.replace(/^\?/,""),i.hash=i.hash.replace(/^#/,""),i.user=l[1]||"",i.pass=l[2]||"",i.port=t[i.protocol]==i.port||i.port==0?"":i.port,i.protocol||/^([a-z]+:)?\/\//.test(r))i.path=i.path.replace(/^\/?/,"/");else{var a=new Url(e.location.href.match(/(.*\/)/)[0]),o=a.path.split("/"),s=i.path.split("/");o.pop();for(var f=0,h=["protocol","user","pass","host","port"],v=h.length;f<v;f++)i[h[f]]=a[h[f]];while(s[0]=="..")o.pop(),s.shift();i.path=(r.substring(0,1)!="/"?o.join("/"):"")+"/"+s.join("/")}u(i)},r=function(n){return n=n.replace(/\+/g," "),n=n.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/g,function(n,t,i,r){var f=parseInt(t,16)-224,e=parseInt(i,16)-128,o,u;return f==0&&e<32?n:(o=parseInt(r,16)-128,u=(f<<12)+(e<<6)+o,u>65535)?n:String.fromCharCode(u)}),n=n.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/g,function(n,t,i){var r=parseInt(t,16)-192,u;return r<2?n:(u=parseInt(i,16)-128,String.fromCharCode((r<<6)+u))}),n.replace(/%([0-7][0-9A-F])/g,function(n,t){return String.fromCharCode(parseInt(t,16))})},u=function(n){var t=n.query;n.query=new function(n){for(var f=/([^=&]+)(=([^&]*))?/g,i,t,u;i=f.exec(n);)t=decodeURIComponent(i[1].replace(/\+/g," ")),u=i[3]?r(i[3]):"",this[t]!=null?(this[t]instanceof Array||(this[t]=[this[t]]),this[t].push(u)):this[t]=u;this.clear=function(){for(t in this)this[t]instanceof Function||delete this[t]};this.toString=function(){var n="",i=encodeURIComponent,t,u,r;for(t in this)if(!(this[t]instanceof Function))if(this[t]instanceof Array)if(u=this[t].length,u)for(r=0;r<u;r++)n+=n?"&":"",n+=i(t)+"="+i(this[t][r]);else n+=(n?"&":"")+i(t)+"=";else n+=n?"&":"",n+=i(t)+"="+i(this[t]);return n}}(t)};return function(n){this.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&this.user+(this.pass&&":"+this.pass)+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+this.hash)};i(this,n)}}()